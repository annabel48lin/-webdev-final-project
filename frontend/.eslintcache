[{"/Users/justinhsu/Desktop/Cornell/web_dev/news-app/frontend/src/index.tsx":"1","/Users/justinhsu/Desktop/Cornell/web_dev/news-app/frontend/src/reportWebVitals.ts":"2","/Users/justinhsu/Desktop/Cornell/web_dev/news-app/frontend/src/App.tsx":"3","/Users/justinhsu/Desktop/Cornell/web_dev/news-app/frontend/src/Following.tsx":"4","/Users/justinhsu/Desktop/Cornell/web_dev/news-app/frontend/src/Home.tsx":"5","/Users/justinhsu/Desktop/Cornell/web_dev/news-app/frontend/src/Settings.tsx":"6","/Users/justinhsu/Desktop/Cornell/web_dev/news-app/frontend/src/Topic.tsx":"7","/Users/justinhsu/Desktop/Cornell/web_dev/news-app/frontend/src/FilteredArticles.tsx":"8","/Users/justinhsu/Desktop/Cornell/web_dev/news-app/frontend/src/Authenticated.tsx":"9","/Users/justinhsu/Desktop/Cornell/web_dev/news-app/frontend/src/Article.tsx":"10"},{"size":661,"mtime":1608341057252,"results":"11","hashOfConfig":"12"},{"size":425,"mtime":1608341057252,"results":"13","hashOfConfig":"12"},{"size":4315,"mtime":1608346614420,"results":"14","hashOfConfig":"12"},{"size":2721,"mtime":1608341596201,"results":"15","hashOfConfig":"12"},{"size":3155,"mtime":1608341057249,"results":"16","hashOfConfig":"12"},{"size":5426,"mtime":1608341529043,"results":"17","hashOfConfig":"12"},{"size":509,"mtime":1608341057249,"results":"18","hashOfConfig":"12"},{"size":1293,"mtime":1608341551213,"results":"19","hashOfConfig":"12"},{"size":1603,"mtime":1608341057248,"results":"20","hashOfConfig":"12"},{"size":2869,"mtime":1608341057248,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"24","usedDeprecatedRules":"25"},"1jm4dqg",{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"25"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"25"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"34","usedDeprecatedRules":"25"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"25"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"40","usedDeprecatedRules":"25"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"25"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"25"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47","usedDeprecatedRules":"25"},"/Users/justinhsu/Desktop/Cornell/web_dev/news-app/frontend/src/index.tsx",["48","49"],"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter} from \"react-router-dom\";\nimport admin from 'firebase-admin';\nimport express from 'express';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n\n",["50","51"],"/Users/justinhsu/Desktop/Cornell/web_dev/news-app/frontend/src/reportWebVitals.ts",[],"/Users/justinhsu/Desktop/Cornell/web_dev/news-app/frontend/src/App.tsx",["52","53"],"/Users/justinhsu/Desktop/Cornell/web_dev/news-app/frontend/src/Following.tsx",[],"/Users/justinhsu/Desktop/Cornell/web_dev/news-app/frontend/src/Home.tsx",["54"],"import React, { useState, useEffect } from \"react\";\n\nimport \"./Border.css\";\nimport FilteredArticles from \"./FilteredArticles\";\nimport Topic from \"./Topic\";\n\ntype CleanArticle = {\n  source: string;\n  author: string;\n  title: string;\n  topic: string;\n  description: string;\n  url: string;\n  urlToImage: string;\n};\n\ntype Props = {readonly articles:CleanArticle[]}\n\nconst Home = ({articles}:Props) => {\n  const [searchBar, setSearchBar] = useState(\"\");\n\n\n  //TODO: let users choose their country in prefs\n  // let country = \"us\"\n  // const fetchArticles = () => {\n  //   fetch('/newsToday?country=' + country)\n  //     .then((res) => res.json())\n  //     .then((json) => setArticles(json));\n  // }\n  // // const articles:CleanArticle[] = require(\"./dummyArticles.json\")\n  // const [articles, setArticles] = useState<readonly CleanArticle[]>([])\n  \n  // useEffect(() => fetchArticles(), []);\n\n\n  // US, World, Politics, Business, Tech, Entertainment\n  const topicsInit = [\n    {\n      name: \"Business\",\n      fav: false\n    },\n    {\n      name: \"Entertainment\",\n      fav: false\n    },\n    {\n      name: \"Health\",\n      fav: false\n    },\n    {\n      name: \"Science\",\n      fav: false\n    },\n    {\n      name: \"Sports\",\n      fav: false\n    },\n    {\n      name: \"Technology\",\n      fav: false\n    },\n  ]\n\n\n  //if all favs are false, display all articles. Else, display the ones where fav is true\n  const [topics, setTopics] = useState(topicsInit);\n  // pass this in to Topic \n  const updateTopics = (name: string) => {\n    // find where in topics that the name occurs, and then set fav\n    const newArr = topics.map((topic) => topic.name === name ? {name : name, fav : !topic.fav} : topic)\n    setTopics(newArr)\n  }\n\n  const allFalse = topics.reduce((res, curr)=> (!curr.fav && res), true)\n\n  const contains = (arr : { name: string;  fav: boolean} [], str : string) => {\n    for (const val of arr) {\n      if (val.name.toLowerCase() === str && val.fav===true) return true\n    }\n    return false \n  };\n  \n  //filter by topic here??\n  //see if topic is faved. if no topic is faved, return general (has all topics)\n  let filteredArticles = (articles || []).filter((article) => article.topic === \"general\");\n  if (!allFalse){\n    filteredArticles =  (articles || []).filter((article)=>\n    (contains (topics, article.topic))\n  )\n  }\n  var today = new Date();\n  var dd = String(today.getDate());\n  var mm = String(today.getMonth() + 1);\n\n  return (\n    <div>\n      <h2 style={{marginLeft: \"20px\"}}> Welcome! It's {mm}/{dd}. Here's your news for today: </h2>\n      <div style={{marginLeft: \"20px\"}}>\n        {topics.map((topic)=>(\n          \n          <Topic key = {topic.name} name={topic.name} fav={topic.fav} callback={updateTopics}/>\n   \n        ))}\n      </div>\n\n      <div style={{ float: \"right\", textAlign: \"right\" }}>\n        <input\n          value={searchBar}\n          placeholder=\"search..\"\n          onChange={(e) => setSearchBar(e.target.value)}\n        />\n      </div>\n\n      <div style={{ width: \"100%\", float: \"left\" }}>\n        <FilteredArticles articles={filteredArticles} query={searchBar} />\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n","/Users/justinhsu/Desktop/Cornell/web_dev/news-app/frontend/src/Settings.tsx",["55","56"],"import React, { useEffect, useState } from \"react\";\nimport Topic from \"./Topic\";\nimport Authenticated from \"./Authenticated\";\nimport firebase from \"firebase/app\";\n// Initialize the FirebaseUI Widget using Firebase.\n// var ui = new firebaseui.auth.AuthUI(firebase.auth());\ntype category = {\n  name: string;\n  following: boolean;\n};\n\ntype UserPref = {\n  categories: category[];\n  country: string;\n};\n\ntype Props = {\n  readonly following: string[];\n  readonly callbackFollowing: (following: string[]) => void\n  readonly callbackCountry: (country: string) => void\n  readonly countryI: string\n  readonly callbackArticles: () => void\n}\nconst Settings = ({following, callbackFollowing, callbackCountry, countryI, callbackArticles} : Props) => {\n\n  const allTopics = ['business', 'entertainment', 'health', 'science', 'sports', 'technology']\n\n  const formatFollowing = (lst: string[]) => {\n    return allTopics.map(t => {\n      let boo = false\n      if (lst.includes(t)) boo = true\n\n      return {name: t, following: boo}\n    })\n  }\n\n  //fetch topics init\n  const [topics, setTopics] = useState<category[]>(formatFollowing(following));\n  const [country, setCountry] = useState(countryI);\n\n  const email = firebase.auth().currentUser?.email;\n\n\n  let followingCategories = topics.filter((topic) => topic.following)  \n\n  useEffect(() => {\n    callbackFollowing(followingCategories.map((category) => category.name))\n  \n    callbackCountry(country)\n    console.log(country)\n  }, \n    [topics, country]\n  );\n\n  \n\n  const fetchUserPrefs = () => {\n    firebase\n      .auth()\n      .currentUser?.getIdToken(true)\n      .then((idtoken) => {\n        fetch(\"/UserPref/\" + email, {\n          method: \"GET\",\n          headers: {\n            idtoken,\n          },\n        })\n          .then((response) => response.json())\n          .then((d) => {\n            // console.log(\"hereeee\")\n            console.log(d);\n            setTopics(d.categories);\n            setCountry(d.country);\n\n            callbackArticles()\n          });\n      })\n      .catch(() => {\n        console.log(\"not authenticated get\");\n      });\n  };\n\n\n  const updateTopics = (name: string) => {\n    // find where in topics that the name occurs, and then set fav\n    // console.log(\"topics\", topics)\n    const newArr = topics.map((topic) =>\n      topic.name === name ? { name: name, following: !topic.following } : topic\n    );\n    setTopics(newArr);\n\n    \n    console.log(following)\n    // console.log(\"newarr\",newArr)\n\n    //get email from firebase\n    //send req to update user prefs\n\n    const email = firebase.auth().currentUser?.email;\n    const prefs: UserPref = { categories: newArr, country: country };\n\n    firebase\n      .auth()\n      .currentUser?.getIdToken(true)\n      .then((idtoken) => {\n        fetch(\"/UserPref/\" + email, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            idtoken,\n          },\n          body: JSON.stringify(prefs),\n        });\n      })\n      .catch(() => {\n        console.log(\"not authenticated set\");\n      });\n  };\n\n    const changeCountry = (event: any) => {\n    const newCountry = event.target.value;\n    setCountry(newCountry);\n\n    const email = firebase.auth().currentUser?.email;\n    const prefs: UserPref = { categories: topics, country: newCountry };\n\n    firebase\n      .auth()\n      .currentUser?.getIdToken(true)\n      .then((idtoken) => {\n        fetch(\"/UserPref/\" + email, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            idtoken,\n          },\n          body: JSON.stringify(prefs),\n        });\n      })\n      .catch(() => {\n        console.log(\"not authenticated set\");\n      });\n  };\n\n  const countries = [\n    \"ae\",\n    \"ar\",\n    \"at\",\n    \"au\",\n    \"be\",\n    \"bg\",\n    \"br\",\n    \"ca\",\n    \"ch\",\n    \"cn\",\n    \"co\",\n    \"cu\",\n    \"cz\",\n    \"de\",\n    \"eg\",\n    \"fr\",\n    \"gb\",\n    \"gr\",\n    \"hk\",\n    \"hu\",\n    \"id\",\n    \"ie\",\n    \"il\",\n    \"in\",\n    \"it\",\n    \"jp\",\n    \"kr\",\n    \"lt\",\n    \"lv\",\n    \"ma\",\n    \"mx\",\n    \"my\",\n    \"ng\",\n    \"nl\",\n    \"no\",\n    \"nz\",\n    \"ph\",\n    \"pl\",\n    \"pt\",\n    \"ro\",\n    \"rs\",\n    \"ru\",\n    \"sa\",\n    \"se\",\n    \"sg\",\n    \"si\",\n    \"sk\",\n    \"th\",\n    \"tr\",\n    \"tw\",\n    \"ua\",\n    \"us\",\n    \"ve\",\n    \"za\",\n  ];\n\n  // fetchUserPrefs();\n  console.log(\"country\", country)\n\n  return (\n    <div style={{ marginLeft: \"20px\" }}>\n      <Authenticated>\n        <div style={{ width: \"100%\", overflow: \"auto\" }}>\n          <div style={{ float: \"left\" }}>\n            <h1>Followed Topics: </h1>\n          </div>\n          <div style={{ float: \"right\", width: \"70%\" }}>\n            <br /> <br />\n            {/* <button onClick={fetchUserPrefs}>⟳</button> */}\n            &nbsp; &nbsp;\n            <button onClick={() => firebase.auth().signOut()}> Sign Out </button>\n          </div>\n        </div>\n        <div style={{ marginLeft: \"20px\" }}>\n          <select onChange={changeCountry} value={country}>\n            {countries.map((country) => (\n              <option key = {country} value={country}>{country.toUpperCase()}</option>\n            ))}\n          </select>\n\n          {topics.map((topic) => (\n            <Topic\n              key={topic.name}\n              name={topic.name}\n              fav={topic.following}\n              callback={updateTopics}\n            />\n          ))}\n        </div>\n      </Authenticated>\n    </div>\n  );\n};\n\nexport default Settings;\n","/Users/justinhsu/Desktop/Cornell/web_dev/news-app/frontend/src/Topic.tsx",["57"],"import React, { ChangeEvent } from 'react';\nimport Button from '@material-ui/core/Button';\n\n\n\ntype Props = {\n  readonly name: string;\n  readonly fav: boolean;\n  readonly callback: any\n};\n\nconst Topic = ({name, fav, callback}: Props) => {\n\n  return (\n    <div style={{display:\"inline\", width: \"auto\", height: \"auto\", margin: \"0px 10px\"}}>\n      <Button variant=\"contained\" color={fav? \"primary\" : \"default\"} onClick = {() => {callback(name)}}>\n        {name}\n  </Button>\n    </div>\n\n  )\n}\nexport default Topic;","/Users/justinhsu/Desktop/Cornell/web_dev/news-app/frontend/src/FilteredArticles.tsx",[],"/Users/justinhsu/Desktop/Cornell/web_dev/news-app/frontend/src/Authenticated.tsx",[],"/Users/justinhsu/Desktop/Cornell/web_dev/news-app/frontend/src/Article.tsx",["58","59","60"],"import React from \"react\";\nimport Link from \"@material-ui/core/Link\";\nimport \"./Border.css\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport {\n  Card,\n  CardContent,\n  Typography,\n  IconButton,\n  CardMedia,\n  Box,\n} from \"@material-ui/core\";\n\ntype Props = {\n  readonly source: string;\n  readonly author: string;\n  readonly title: string;\n  readonly description: string;\n  readonly url: string;\n  readonly urlToImage: string;\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    // display: \"flex\",\n    // height: \"200px\",\n    margin: \"25px\",\n    border: \"2px solid black\",\n    borderRadius: \"25px\",\n    boxSizing: \"border-box\",\n    padding: \"30px\",\n    backgroundColor: \"azure\",\n  },\n  details: {\n    // display: \"flex\",\n    // flexDirection: \"column\",\n    width: \"70%\",\n    float: \"left\",\n    verticalAlign: \"top\",\n    marginTop: \"0px\",\n    marginBottom: \"0px\",\n  },\n  content: {\n    flex: \"1 0 auto\",\n    padding: \"0px\",\n    paddingBottom: \"0px\",\n  },\n  cover: {\n    display: \"flex\",\n    height: \"auto\",\n    // paddingTop: '5%',\n    float: \"right\",\n    width: \"30%\",\n    maxHeight: \"50%\",\n    padding: \"0px\",\n    // alignText: \"right\",\n    // alignItems: \"right\",\n    // alignSelf: \"right\"\n  },\n  img: {\n    height: \"auto\",\n    width: \"100%\",\n    // maxHeight: \"75px\",\n    objectFit: \"contain\",\n    // maxHeight: \"100%\",\n    margin: \"0px\",\n    // display: \"block\",\n    objectPosition: \"100% 0%\",\n  },\n}));\n\nconst Article = ({\n  source,\n  author,\n  title,\n  description,\n  url,\n  urlToImage,\n}: Props) => {\n  const classes = useStyles();\n  const theme = useTheme();\n\n  return (\n    // <div className=\"Border\">\n\n    <Card className={classes.root}>\n      <Link\n        href={url}\n        target=\"_blank\"\n        color=\"inherit\"\n        style={{ padding: \"0px\" }}\n      >\n        <div className={classes.details} style={{ padding: \"0px\" }}>\n          <CardContent className={classes.content} style={{ padding: \"0px\" }}>\n            <Typography component=\"h5\" variant=\"h5\">\n              <Box fontWeight=\"fontWeightBold\">{title}</Box>\n            </Typography>\n            <Typography variant=\"subtitle1\" color=\"textSecondary\">\n              {description}\n            </Typography>\n\n            <br />\n            <Typography\n              variant=\"subtitle2\"\n              color=\"textPrimary\"\n              style={{ display: \"flex\", padding: \"0px\" }}\n            >\n              {source + \" \"}\n              {author == null || author === undefined || author === \"\" ? \" \" : \" · \" + author}\n            </Typography>\n          </CardContent>\n        </div>\n\n        <div className={classes.cover}>\n          <img className={classes.img} src={urlToImage} alt={urlToImage}></img>\n        </div>\n        {/* <CardMedia className={classes.cover} image={source}  title={source}  /> */}\n      </Link>\n    </Card>\n  );\n};\n\nexport default Article;\n",{"ruleId":"61","severity":1,"message":"62","line":7,"column":8,"nodeType":"63","messageId":"64","endLine":7,"endColumn":13},{"ruleId":"61","severity":1,"message":"65","line":8,"column":8,"nodeType":"63","messageId":"64","endLine":8,"endColumn":15},{"ruleId":"66","replacedBy":"67"},{"ruleId":"68","replacedBy":"69"},{"ruleId":"61","severity":1,"message":"70","line":1,"column":26,"nodeType":"63","messageId":"64","endLine":1,"endColumn":35},{"ruleId":"61","severity":1,"message":"71","line":5,"column":8,"nodeType":"63","messageId":"64","endLine":5,"endColumn":22},{"ruleId":"61","severity":1,"message":"70","line":1,"column":27,"nodeType":"63","messageId":"64","endLine":1,"endColumn":36},{"ruleId":"72","severity":1,"message":"73","line":52,"column":5,"nodeType":"74","endLine":52,"endColumn":22,"suggestions":"75"},{"ruleId":"61","severity":1,"message":"76","line":57,"column":9,"nodeType":"63","messageId":"64","endLine":57,"endColumn":23},{"ruleId":"61","severity":1,"message":"77","line":1,"column":17,"nodeType":"63","messageId":"64","endLine":1,"endColumn":28},{"ruleId":"61","severity":1,"message":"78","line":9,"column":3,"nodeType":"63","messageId":"64","endLine":9,"endColumn":13},{"ruleId":"61","severity":1,"message":"79","line":10,"column":3,"nodeType":"63","messageId":"64","endLine":10,"endColumn":12},{"ruleId":"61","severity":1,"message":"80","line":81,"column":9,"nodeType":"63","messageId":"64","endLine":81,"endColumn":14},"@typescript-eslint/no-unused-vars","'admin' is defined but never used.","Identifier","unusedVar","'express' is defined but never used.","no-native-reassign",["81"],"no-negated-in-lhs",["82"],"'useEffect' is defined but never used.","'Authentication' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'callbackCountry', 'callbackFollowing', and 'followingCategories'. Either include them or remove the dependency array. If 'callbackFollowing' changes too often, find the parent component that defines it and wrap that definition in useCallback.","ArrayExpression",["83"],"'fetchUserPrefs' is assigned a value but never used.","'ChangeEvent' is defined but never used.","'IconButton' is defined but never used.","'CardMedia' is defined but never used.","'theme' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"84","fix":"85"},"Update the dependencies array to be: [topics, country, callbackFollowing, followingCategories, callbackCountry]",{"range":"86","text":"87"},[1471,1488],"[topics, country, callbackFollowing, followingCategories, callbackCountry]"]